.TH AHRIMAN "1" "2026\-02\-21" "ahriman 2.20.0rc4" "ArcH linux ReposItory MANager"
.SH NAME
ahriman \- ArcH linux ReposItory MANager
.SH SYNOPSIS
.B [0m[1;35mahriman[0m
[[32m-h[0m] [[32m-a [33mARCHITECTURE[0m] [[32m-c [33mCONFIGURATION[0m] [[36m--force[0m] [[32m-l [33mLOCK[0m] [[36m--log-handler [33m{console,syslog,journald}[0m] [[32m-q[0m] [[36m--report | --no-report[0m] [[32m-r [33mREPOSITORY[0m] [[36m--unsafe[0m] [[32m-V[0m] [[36m--wait-timeout [33mWAIT_TIMEOUT[0m] [32m{add,aur-search,check,clean,config,config-validate,copy,daemon,help,help-commands-unsafe,help-updates,help-version,init,key-import,package-add,package-changes,package-changes-remove,package-copy,package-remove,package-status,package-status-remove,package-status-update,package-update,patch-add,patch-list,patch-remove,patch-set-add,rebuild,remove,remove-unknown,repo-backup,repo-check,repo-clean,repo-config,repo-config-validate,repo-create-keyring,repo-create-mirrorlist,repo-daemon,repo-init,repo-rebuild,repo-remove-unknown,repo-report,repo-restore,repo-setup,repo-sign,repo-statistics,repo-status-update,repo-sync,repo-tree,repo-triggers,repo-update,report,run,search,service-clean,service-config,service-config-validate,service-key-import,service-repositories,service-run,service-setup,service-shell,service-tree-migrate,setup,shell,sign,status,status-update,sync,update,user-add,user-list,user-remove,version,web,web-reload} ...[0m
.SH DESCRIPTION
ArcH linux ReposItory MANager

.SH OPTIONS
.TP
\fB\-a\fR \fI\,ARCHITECTURE\/\fR, \fB\-\-architecture\fR \fI\,ARCHITECTURE\/\fR
filter by target architecture

.TP
\fB\-c\fR \fI\,CONFIGURATION\/\fR, \fB\-\-configuration\fR \fI\,CONFIGURATION\/\fR
configuration path

.TP
\fB\-\-force\fR
force run, remove file lock

.TP
\fB\-l\fR \fI\,LOCK\/\fR, \fB\-\-lock\fR \fI\,LOCK\/\fR
lock file

.TP
\fB\-\-log\-handler\fR \fI\,{console,syslog,journald}\/\fR
explicit log handler specification. If none set, the handler will be guessed from environment

.TP
\fB\-q\fR, \fB\-\-quiet\fR
force disable any logging

.TP
\fB\-\-report\fR, \fB\-\-no\-report\fR
force enable or disable reporting to web service

.TP
\fB\-r\fR \fI\,REPOSITORY\/\fR, \fB\-\-repository\fR \fI\,REPOSITORY\/\fR
filter by target repository

.TP
\fB\-\-unsafe\fR
allow to run ahriman as non\-ahriman user. Some actions might be unavailable

.TP
\fB\-V\fR, \fB\-\-version\fR
show program's version number and exit

.TP
\fB\-\-wait\-timeout\fR \fI\,WAIT_TIMEOUT\/\fR
wait for lock to be free. Negative value will lead to immediate application run even if there is lock file. In case of
zero value, the application will wait infinitely

.SH
COMMAND
.TP
\fBahriman\fR \fI\,aur\-search\/\fR
search for package
.TP
\fBahriman\fR \fI\,help\/\fR
show help message
.TP
\fBahriman\fR \fI\,help\-commands\-unsafe\/\fR
list unsafe commands
.TP
\fBahriman\fR \fI\,help\-updates\/\fR
check for service updates
.TP
\fBahriman\fR \fI\,help\-version\/\fR
application version
.TP
\fBahriman\fR \fI\,package\-add\/\fR
add package
.TP
\fBahriman\fR \fI\,package\-changes\/\fR
get package changes
.TP
\fBahriman\fR \fI\,package\-changes\-remove\/\fR
remove package changes
.TP
\fBahriman\fR \fI\,package\-copy\/\fR
copy package from another repository
.TP
\fBahriman\fR \fI\,package\-remove\/\fR
remove package
.TP
\fBahriman\fR \fI\,package\-status\/\fR
get package status
.TP
\fBahriman\fR \fI\,package\-status\-remove\/\fR
remove package status
.TP
\fBahriman\fR \fI\,package\-status\-update\/\fR
update package status
.TP
\fBahriman\fR \fI\,patch\-add\/\fR
add patch for PKGBUILD function
.TP
\fBahriman\fR \fI\,patch\-list\/\fR
list patch sets
.TP
\fBahriman\fR \fI\,patch\-remove\/\fR
remove patch set
.TP
\fBahriman\fR \fI\,patch\-set\-add\/\fR
add patch set
.TP
\fBahriman\fR \fI\,repo\-backup\/\fR
backup repository data
.TP
\fBahriman\fR \fI\,repo\-check\/\fR
check for updates
.TP
\fBahriman\fR \fI\,repo\-create\-keyring\/\fR
create keyring package
.TP
\fBahriman\fR \fI\,repo\-create\-mirrorlist\/\fR
create mirrorlist package
.TP
\fBahriman\fR \fI\,repo\-daemon\/\fR
run application as daemon
.TP
\fBahriman\fR \fI\,repo\-rebuild\/\fR
rebuild repository
.TP
\fBahriman\fR \fI\,repo\-remove\-unknown\/\fR
remove unknown packages
.TP
\fBahriman\fR \fI\,repo\-report\/\fR
generate report
.TP
\fBahriman\fR \fI\,repo\-restore\/\fR
restore repository data
.TP
\fBahriman\fR \fI\,repo\-sign\/\fR
sign packages
.TP
\fBahriman\fR \fI\,repo\-statistics\/\fR
repository statistics
.TP
\fBahriman\fR \fI\,repo\-status\-update\/\fR
update repository status
.TP
\fBahriman\fR \fI\,repo\-sync\/\fR
sync repository
.TP
\fBahriman\fR \fI\,repo\-tree\/\fR
dump repository tree
.TP
\fBahriman\fR \fI\,repo\-triggers\/\fR
run triggers
.TP
\fBahriman\fR \fI\,repo\-update\/\fR
update packages
.TP
\fBahriman\fR \fI\,service\-clean\/\fR
clean local caches
.TP
\fBahriman\fR \fI\,service\-config\/\fR
dump configuration
.TP
\fBahriman\fR \fI\,service\-config\-validate\/\fR
validate system configuration
.TP
\fBahriman\fR \fI\,service\-key\-import\/\fR
import PGP key
.TP
\fBahriman\fR \fI\,service\-repositories\/\fR
show repositories
.TP
\fBahriman\fR \fI\,service\-run\/\fR
run multiple commands
.TP
\fBahriman\fR \fI\,service\-setup\/\fR
initial service configuration
.TP
\fBahriman\fR \fI\,service\-shell\/\fR
invoke python shell
.TP
\fBahriman\fR \fI\,service\-tree\-migrate\/\fR
migrate repository tree
.TP
\fBahriman\fR \fI\,user\-add\/\fR
create or update user
.TP
\fBahriman\fR \fI\,user\-list\/\fR
user known users and their access
.TP
\fBahriman\fR \fI\,user\-remove\/\fR
remove user
.TP
\fBahriman\fR \fI\,web\/\fR
web server
.TP
\fBahriman\fR \fI\,web\-reload\/\fR
reload configuration

.SH COMMAND \fI\,'ahriman aur\-search'\/\fR
[1;34musage: [0m[1;35mahriman aur\-search[0m [[32m\-h[0m] [[32m\-e[0m] [[36m\-\-info | \-\-no\-info[0m]
                          [[36m\-\-sort\-by [33m{description,first_submitted,id,last_modified,maintainer,name,num_votes,out_of_date,package_base,package_base_id,popularity,repository,submitter,url,url_path,version}[0m]
                          [32msearch [search ...][0m

search for package in AUR using API

.TP
\fBsearch\fR
search terms, can be specified multiple times, the result will match all terms

.SH OPTIONS \fI\,'ahriman aur\-search'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-info\fR, \fB\-\-no\-info\fR
show additional package information

.TP
\fB\-\-sort\-by\fR \fI\,{description,first_submitted,id,last_modified,maintainer,name,num_votes,out_of_date,package_base,package_base_id,popularity,repository,submitter,url,url_path,version}\/\fR
sort field by this field. In case if two packages have the same value of the specified field, they will be always sorted
by name

.SH COMMAND \fI\,'ahriman help'\/\fR
[1;34musage: [0m[1;35mahriman help[0m [[32m\-h[0m] [32m[subcommand][0m

show help message for application or command and exit

.TP
\fBsubcommand\fR
show help message for specific command

.SH COMMAND \fI\,'ahriman help\-commands\-unsafe'\/\fR
[1;34musage: [0m[1;35mahriman help\-commands\-unsafe[0m [[32m\-h[0m] [32m[subcommand ...][0m

list unsafe commands as defined in default args

.TP
\fBsubcommand\fR
instead of showing commands, just test command line for unsafe subcommand and return 0 in case if command is safe and 1
otherwise

.SH COMMAND \fI\,'ahriman help\-updates'\/\fR
[1;34musage: [0m[1;35mahriman help\-updates[0m [[32m\-h[0m] [[32m\-e[0m]

request AUR for current version and compare with current service version

.SH OPTIONS \fI\,'ahriman help\-updates'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit code if updates available

.SH COMMAND \fI\,'ahriman help\-version'\/\fR
[1;34musage: [0m[1;35mahriman help\-version[0m [[32m\-h[0m]

print application and its dependencies versions

.SH COMMAND \fI\,'ahriman package\-add'\/\fR
[1;34musage: [0m[1;35mahriman package\-add[0m [[32m\-h[0m] [[36m\-\-changes | \-\-no\-changes[0m] [[36m\-\-dependencies | \-\-no\-dependencies[0m] [[32m\-e[0m]
                           [[36m\-\-increment | \-\-no\-increment[0m] [[32m\-n[0m] [[32m\-y[0m]
                           [[32m\-s [33m{auto,archive,aur,directory,local,remote,repository}[0m] [[32m\-u [33mUSERNAME[0m] [[32m\-v [33mVARIABLE[0m]
                           [32mpackage [package ...][0m

add existing or new package to the build queue

.TP
\fBpackage\fR
package source (base name, path to local files, remote URL)

.SH OPTIONS \fI\,'ahriman package\-add'\/\fR
.TP
\fB\-\-changes\fR, \fB\-\-no\-changes\fR
calculate changes from the latest known commit if available

.TP
\fB\-\-dependencies\fR, \fB\-\-no\-dependencies\fR
process missing package dependencies

.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-increment\fR, \fB\-\-no\-increment\fR
increment package release (pkgrel) version on duplicate

.TP
\fB\-n\fR, \fB\-\-now\fR
run update function after

.TP
\fB\-y\fR, \fB\-\-refresh\fR
download fresh package databases from the mirror before actions, \-yy to force refresh even if up to date

.TP
\fB\-s\fR \fI\,{auto,archive,aur,directory,local,remote,repository}\/\fR, \fB\-\-source\fR \fI\,{auto,archive,aur,directory,local,remote,repository}\/\fR
explicitly specify the package source for this command

.TP
\fB\-u\fR \fI\,USERNAME\/\fR, \fB\-\-username\fR \fI\,USERNAME\/\fR
build as user

.TP
\fB\-v\fR \fI\,VARIABLE\/\fR, \fB\-\-variable\fR \fI\,VARIABLE\/\fR
apply specified makepkg variables to the next build

.SH COMMAND \fI\,'ahriman package\-changes'\/\fR
[1;34musage: [0m[1;35mahriman package\-changes[0m [[32m\-h[0m] [[32m\-e[0m] [32mpackage[0m

retrieve package changes stored in database

.TP
\fBpackage\fR
package base

.SH OPTIONS \fI\,'ahriman package\-changes'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.SH COMMAND \fI\,'ahriman package\-changes\-remove'\/\fR
[1;34musage: [0m[1;35mahriman package\-changes\-remove[0m [[32m\-h[0m] [32mpackage[0m

remove the package changes stored remotely

.TP
\fBpackage\fR
package base

.SH COMMAND \fI\,'ahriman package\-copy'\/\fR
[1;34musage: [0m[1;35mahriman package\-copy[0m [[32m\-h[0m] [[32m\-e[0m] [[36m\-\-remove[0m] [32msource[0m [32mpackage [package ...][0m

copy package and its metadata from another repository

.TP
\fBsource\fR
source repository name

.TP
\fBpackage\fR
package base

.SH OPTIONS \fI\,'ahriman package\-copy'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-remove\fR
remove package from the source repository after

.SH COMMAND \fI\,'ahriman package\-remove'\/\fR
[1;34musage: [0m[1;35mahriman package\-remove[0m [[32m\-h[0m] [32mpackage [package ...][0m

remove package from the repository

.TP
\fBpackage\fR
package name or base

.SH COMMAND \fI\,'ahriman package\-status'\/\fR
[1;34musage: [0m[1;35mahriman package\-status[0m [[32m\-h[0m] [[36m\-\-ahriman[0m] [[32m\-e[0m] [[36m\-\-info | \-\-no\-info[0m] [[32m\-s [33m{unknown,pending,building,failed,success}[0m]
                              [32m[package ...][0m

request status of the package

.TP
\fBpackage\fR
filter status by package base

.SH OPTIONS \fI\,'ahriman package\-status'\/\fR
.TP
\fB\-\-ahriman\fR
get service status itself

.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-info\fR, \fB\-\-no\-info\fR
show additional package information

.TP
\fB\-s\fR \fI\,{unknown,pending,building,failed,success}\/\fR, \fB\-\-status\fR \fI\,{unknown,pending,building,failed,success}\/\fR
filter packages by status

.SH COMMAND \fI\,'ahriman package\-status\-remove'\/\fR
[1;34musage: [0m[1;35mahriman package\-status\-remove[0m [[32m\-h[0m] [32mpackage [package ...][0m

remove the package from the status page

.TP
\fBpackage\fR
remove specified packages from status page

.SH COMMAND \fI\,'ahriman package\-status\-update'\/\fR
[1;34musage: [0m[1;35mahriman package\-status\-update[0m [[32m\-h[0m] [[32m\-s [33m{unknown,pending,building,failed,success}[0m] [32m[package ...][0m

update package status on the status page

.TP
\fBpackage\fR
set status for specified packages. If no packages supplied, service status will be updated

.SH OPTIONS \fI\,'ahriman package\-status\-update'\/\fR
.TP
\fB\-s\fR \fI\,{unknown,pending,building,failed,success}\/\fR, \fB\-\-status\fR \fI\,{unknown,pending,building,failed,success}\/\fR
new package build status

.SH COMMAND \fI\,'ahriman patch\-add'\/\fR
[1;34musage: [0m[1;35mahriman patch\-add[0m [[32m\-h[0m] [32mpackage[0m [32mvariable[0m [32m[patch][0m

create or update patched PKGBUILD function or variable

.TP
\fBpackage\fR
package base

.TP
\fBvariable\fR
PKGBUILD variable or function name. If variable is a function, it must end with ()

.TP
\fBpatch\fR
path to file which contains function or variable value. If not set, the value will be read from stdin

.SH COMMAND \fI\,'ahriman patch\-list'\/\fR
[1;34musage: [0m[1;35mahriman patch\-list[0m [[32m\-h[0m] [[32m\-e[0m] [[32m\-v [33mVARIABLE[0m] [32mpackage[0m

list available patches for the package

.TP
\fBpackage\fR
package base

.SH OPTIONS \fI\,'ahriman patch\-list'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-v\fR \fI\,VARIABLE\/\fR, \fB\-\-variable\fR \fI\,VARIABLE\/\fR
if set, show only patches for specified PKGBUILD variables

.SH COMMAND \fI\,'ahriman patch\-remove'\/\fR
[1;34musage: [0m[1;35mahriman patch\-remove[0m [[32m\-h[0m] [[32m\-v [33mVARIABLE[0m] [32mpackage[0m

remove patches for the package

.TP
\fBpackage\fR
package base

.SH OPTIONS \fI\,'ahriman patch\-remove'\/\fR
.TP
\fB\-v\fR \fI\,VARIABLE\/\fR, \fB\-\-variable\fR \fI\,VARIABLE\/\fR
should be used for single\-function patches in case if you wold like to remove only specified PKGBUILD variables. In case
if not set, it will remove all patches related to the package

.SH COMMAND \fI\,'ahriman patch\-set\-add'\/\fR
[1;34musage: [0m[1;35mahriman patch\-set\-add[0m [[32m\-h[0m] [[32m\-t [33mTRACK[0m] [32mpackage[0m

create or update source patches

.TP
\fBpackage\fR
path to directory with changed files for patch addition/update

.SH OPTIONS \fI\,'ahriman patch\-set\-add'\/\fR
.TP
\fB\-t\fR \fI\,TRACK\/\fR, \fB\-\-track\fR \fI\,TRACK\/\fR
files which has to be tracked

.SH COMMAND \fI\,'ahriman repo\-backup'\/\fR
[1;34musage: [0m[1;35mahriman repo\-backup[0m [[32m\-h[0m] [32mpath[0m

backup repository settings and database

.TP
\fBpath\fR
path of the output archive

.SH COMMAND \fI\,'ahriman repo\-check'\/\fR
[1;34musage: [0m[1;35mahriman repo\-check[0m [[32m\-h[0m] [[36m\-\-changes | \-\-no\-changes[0m] [[36m\-\-check\-files | \-\-no\-check\-files[0m] [[32m\-e[0m] [[36m\-\-vcs | \-\-no\-vcs[0m]
                          [[32m\-y[0m]
                          [32m[package ...][0m

check for packages updates. Same as repo\-update \-\-dry\-run \-\-no\-manual

.TP
\fBpackage\fR
filter check by package base

.SH OPTIONS \fI\,'ahriman repo\-check'\/\fR
.TP
\fB\-\-changes\fR, \fB\-\-no\-changes\fR
calculate changes from the latest known commit if available

.TP
\fB\-\-check\-files\fR, \fB\-\-no\-check\-files\fR
enable or disable checking of broken dependencies (e.g. dynamically linked libraries or modules directories)

.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-vcs\fR, \fB\-\-no\-vcs\fR
fetch actual version of VCS packages

.TP
\fB\-y\fR, \fB\-\-refresh\fR
download fresh package databases from the mirror before actions, \-yy to force refresh even if up to date

.SH COMMAND \fI\,'ahriman repo\-create\-keyring'\/\fR
[1;34musage: [0m[1;35mahriman repo\-create\-keyring[0m [[32m\-h[0m]

create package which contains list of trusted keys as set by configuration. Note, that this action will only create package, the package itself has to be built manually

.SH COMMAND \fI\,'ahriman repo\-create\-mirrorlist'\/\fR
[1;34musage: [0m[1;35mahriman repo\-create\-mirrorlist[0m [[32m\-h[0m]

create package which contains list of available mirrors as set by configuration. Note, that this action will only create package, the package itself has to be built manually

.SH COMMAND \fI\,'ahriman repo\-daemon'\/\fR
[1;34musage: [0m[1;35mahriman repo\-daemon[0m [[32m\-h[0m] [[32m\-i [33mINTERVAL[0m] [[36m\-\-aur | \-\-no\-aur[0m] [[36m\-\-changes | \-\-no\-changes[0m]
                           [[36m\-\-check\-files | \-\-no\-check\-files[0m] [[36m\-\-dependencies | \-\-no\-dependencies[0m] [[36m\-\-dry\-run[0m]
                           [[36m\-\-increment | \-\-no\-increment[0m] [[36m\-\-local | \-\-no\-local[0m] [[36m\-\-manual | \-\-no\-manual[0m]
                           [[36m\-\-partitions | \-\-no\-partitions[0m] [[32m\-u [33mUSERNAME[0m] [[36m\-\-vcs | \-\-no\-vcs[0m] [[32m\-y[0m]

start process which periodically will run update process

.SH OPTIONS \fI\,'ahriman repo\-daemon'\/\fR
.TP
\fB\-i\fR \fI\,INTERVAL\/\fR, \fB\-\-interval\fR \fI\,INTERVAL\/\fR
interval between runs in seconds

.TP
\fB\-\-aur\fR, \fB\-\-no\-aur\fR
enable or disable checking for AUR updates

.TP
\fB\-\-changes\fR, \fB\-\-no\-changes\fR
calculate changes from the latest known commit if available. Only applicable in dry run mode

.TP
\fB\-\-check\-files\fR, \fB\-\-no\-check\-files\fR
enable or disable checking of broken dependencies (e.g. dynamically linked libraries or modules directories)

.TP
\fB\-\-dependencies\fR, \fB\-\-no\-dependencies\fR
process missing package dependencies

.TP
\fB\-\-dry\-run\fR
just perform check for updates, same as check command

.TP
\fB\-\-increment\fR, \fB\-\-no\-increment\fR
increment package release (pkgrel) on duplicate

.TP
\fB\-\-local\fR, \fB\-\-no\-local\fR
enable or disable checking of local packages for updates

.TP
\fB\-\-manual\fR, \fB\-\-no\-manual\fR
include or exclude manual updates

.TP
\fB\-\-partitions\fR, \fB\-\-no\-partitions\fR
instead of updating whole repository, split updates into chunks

.TP
\fB\-u\fR \fI\,USERNAME\/\fR, \fB\-\-username\fR \fI\,USERNAME\/\fR
build as user

.TP
\fB\-\-vcs\fR, \fB\-\-no\-vcs\fR
fetch actual version of VCS packages

.TP
\fB\-y\fR, \fB\-\-refresh\fR
download fresh package databases from the mirror before actions, \-yy to force refresh even if up to date

.SH COMMAND \fI\,'ahriman repo\-rebuild'\/\fR
[1;34musage: [0m[1;35mahriman repo\-rebuild[0m [[32m\-h[0m] [[36m\-\-depends\-on [33mDEPENDS_ON[0m] [[36m\-\-dry\-run[0m] [[36m\-\-from\-database[0m] [[36m\-\-increment | \-\-no\-increment[0m]
                            [[32m\-e[0m] [[32m\-s [33m{unknown,pending,building,failed,success}[0m] [[32m\-u [33mUSERNAME[0m]

force rebuild whole repository

.SH OPTIONS \fI\,'ahriman repo\-rebuild'\/\fR
.TP
\fB\-\-depends\-on\fR \fI\,DEPENDS_ON\/\fR
only rebuild packages that depend on specified packages

.TP
\fB\-\-dry\-run\fR
just perform check for packages without rebuild process itself

.TP
\fB\-\-from\-database\fR
read packages from database instead of filesystem. This feature in particular is required in case if you would like to
restore repository from another repository instance. Note, however, that in order to restore packages you need to have
original ahriman instance run with web service and have run repo\-update at least once.

.TP
\fB\-\-increment\fR, \fB\-\-no\-increment\fR
increment package release (pkgrel) on duplicate

.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-s\fR \fI\,{unknown,pending,building,failed,success}\/\fR, \fB\-\-status\fR \fI\,{unknown,pending,building,failed,success}\/\fR
filter packages by status. Requires \-\-from\-database to be set

.TP
\fB\-u\fR \fI\,USERNAME\/\fR, \fB\-\-username\fR \fI\,USERNAME\/\fR
build as user

.SH COMMAND \fI\,'ahriman repo\-remove\-unknown'\/\fR
[1;34musage: [0m[1;35mahriman repo\-remove\-unknown[0m [[32m\-h[0m] [[36m\-\-dry\-run[0m]

remove packages which are missing in AUR and do not have local PKGBUILDs

.SH OPTIONS \fI\,'ahriman repo\-remove\-unknown'\/\fR
.TP
\fB\-\-dry\-run\fR
just perform check for packages without removal

.SH COMMAND \fI\,'ahriman repo\-report'\/\fR
[1;34musage: [0m[1;35mahriman repo\-report[0m [[32m\-h[0m]

generate repository report according to current settings

.SH COMMAND \fI\,'ahriman repo\-restore'\/\fR
[1;34musage: [0m[1;35mahriman repo\-restore[0m [[32m\-h[0m] [[32m\-o [33mOUTPUT[0m] [32mpath[0m

restore settings and database

.TP
\fBpath\fR
path of the input archive

.SH OPTIONS \fI\,'ahriman repo\-restore'\/\fR
.TP
\fB\-o\fR \fI\,OUTPUT\/\fR, \fB\-\-output\fR \fI\,OUTPUT\/\fR
root path of the extracted files

.SH COMMAND \fI\,'ahriman repo\-sign'\/\fR
[1;34musage: [0m[1;35mahriman repo\-sign[0m [[32m\-h[0m] [32m[package ...][0m

(re\-)sign packages and repository database according to current settings

.TP
\fBpackage\fR
sign only specified packages

.SH COMMAND \fI\,'ahriman repo\-statistics'\/\fR
[1;34musage: [0m[1;35mahriman repo\-statistics[0m [[32m\-h[0m] [[36m\-\-chart [33mCHART[0m]
                               [[32m\-e [33m{package\-outdated,package\-removed,package\-update\-failed,package\-updated}[0m]
                               [[36m\-\-from\-date [33mFROM_DATE[0m] [[36m\-\-limit [33mLIMIT[0m] [[36m\-\-offset [33mOFFSET[0m] [[36m\-\-to\-date [33mTO_DATE[0m]
                               [32m[package][0m

fetch repository statistics

.TP
\fBpackage\fR
fetch only events for the specified package

.SH OPTIONS \fI\,'ahriman repo\-statistics'\/\fR
.TP
\fB\-\-chart\fR \fI\,CHART\/\fR
create updates chart and save it to the specified path

.TP
\fB\-e\fR \fI\,{package\-outdated,package\-removed,package\-update\-failed,package\-updated}\/\fR, \fB\-\-event\fR \fI\,{package\-outdated,package\-removed,package\-update\-failed,package\-updated}\/\fR
event type filter

.TP
\fB\-\-from\-date\fR \fI\,FROM_DATE\/\fR
only fetch events which are newer than the date

.TP
\fB\-\-limit\fR \fI\,LIMIT\/\fR
limit response by specified amount of events

.TP
\fB\-\-offset\fR \fI\,OFFSET\/\fR
skip specified amount of events

.TP
\fB\-\-to\-date\fR \fI\,TO_DATE\/\fR
only fetch events which are older than the date

.SH COMMAND \fI\,'ahriman repo\-status\-update'\/\fR
[1;34musage: [0m[1;35mahriman repo\-status\-update[0m [[32m\-h[0m] [[32m\-s [33m{unknown,pending,building,failed,success}[0m]

update repository status on the status page

.SH OPTIONS \fI\,'ahriman repo\-status\-update'\/\fR
.TP
\fB\-s\fR \fI\,{unknown,pending,building,failed,success}\/\fR, \fB\-\-status\fR \fI\,{unknown,pending,building,failed,success}\/\fR
new status

.SH COMMAND \fI\,'ahriman repo\-sync'\/\fR
[1;34musage: [0m[1;35mahriman repo\-sync[0m [[32m\-h[0m]

sync repository files to remote server according to current settings

.SH COMMAND \fI\,'ahriman repo\-tree'\/\fR
[1;34musage: [0m[1;35mahriman repo\-tree[0m [[32m\-h[0m] [[32m\-p [33mPARTITIONS[0m]

dump repository tree based on packages dependencies

.SH OPTIONS \fI\,'ahriman repo\-tree'\/\fR
.TP
\fB\-p\fR \fI\,PARTITIONS\/\fR, \fB\-\-partitions\fR \fI\,PARTITIONS\/\fR
also divide packages by independent partitions

.SH COMMAND \fI\,'ahriman repo\-triggers'\/\fR
[1;34musage: [0m[1;35mahriman repo\-triggers[0m [[32m\-h[0m] [32m[trigger ...][0m

run triggers on empty build result as configured by settings

.TP
\fBtrigger\fR
instead of running all triggers as set by configuration, just process specified ones in order of mention

.SH COMMAND \fI\,'ahriman repo\-update'\/\fR
[1;34musage: [0m[1;35mahriman repo\-update[0m [[32m\-h[0m] [[36m\-\-aur | \-\-no\-aur[0m] [[36m\-\-changes | \-\-no\-changes[0m] [[36m\-\-check\-files | \-\-no\-check\-files[0m]
                           [[36m\-\-dependencies | \-\-no\-dependencies[0m] [[36m\-\-dry\-run[0m] [[32m\-e[0m] [[36m\-\-increment | \-\-no\-increment[0m]
                           [[36m\-\-local | \-\-no\-local[0m] [[36m\-\-manual | \-\-no\-manual[0m] [[32m\-u [33mUSERNAME[0m] [[36m\-\-vcs | \-\-no\-vcs[0m] [[32m\-y[0m]
                           [32m[package ...][0m

check for packages updates and run build process if requested

.TP
\fBpackage\fR
filter check by package base

.SH OPTIONS \fI\,'ahriman repo\-update'\/\fR
.TP
\fB\-\-aur\fR, \fB\-\-no\-aur\fR
enable or disable checking for AUR updates

.TP
\fB\-\-changes\fR, \fB\-\-no\-changes\fR
calculate changes from the latest known commit if available. Only applicable in dry run mode

.TP
\fB\-\-check\-files\fR, \fB\-\-no\-check\-files\fR
enable or disable checking of broken dependencies (e.g. dynamically linked libraries or modules directories)

.TP
\fB\-\-dependencies\fR, \fB\-\-no\-dependencies\fR
process missing package dependencies

.TP
\fB\-\-dry\-run\fR
just perform check for updates, same as check command

.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-\-increment\fR, \fB\-\-no\-increment\fR
increment package release (pkgrel) on duplicate

.TP
\fB\-\-local\fR, \fB\-\-no\-local\fR
enable or disable checking of local packages for updates

.TP
\fB\-\-manual\fR, \fB\-\-no\-manual\fR
include or exclude manual updates

.TP
\fB\-u\fR \fI\,USERNAME\/\fR, \fB\-\-username\fR \fI\,USERNAME\/\fR
build as user

.TP
\fB\-\-vcs\fR, \fB\-\-no\-vcs\fR
fetch actual version of VCS packages

.TP
\fB\-y\fR, \fB\-\-refresh\fR
download fresh package databases from the mirror before actions, \-yy to force refresh even if up to date

.SH COMMAND \fI\,'ahriman service\-clean'\/\fR
[1;34musage: [0m[1;35mahriman service\-clean[0m [[32m\-h[0m] [[36m\-\-cache | \-\-no\-cache[0m] [[36m\-\-chroot | \-\-no\-chroot[0m] [[36m\-\-manual | \-\-no\-manual[0m]
                             [[36m\-\-packages | \-\-no\-packages[0m] [[36m\-\-pacman | \-\-no\-pacman[0m]

remove local caches

.SH OPTIONS \fI\,'ahriman service\-clean'\/\fR
.TP
\fB\-\-cache\fR, \fB\-\-no\-cache\fR
clear directory with package caches

.TP
\fB\-\-chroot\fR, \fB\-\-no\-chroot\fR
clear build chroot

.TP
\fB\-\-manual\fR, \fB\-\-no\-manual\fR
clear manually added packages queue

.TP
\fB\-\-packages\fR, \fB\-\-no\-packages\fR
clear directory with built packages

.TP
\fB\-\-pacman\fR, \fB\-\-no\-pacman\fR
clear directory with pacman local database cache

.SH COMMAND \fI\,'ahriman service\-config'\/\fR
[1;34musage: [0m[1;35mahriman service\-config[0m [[32m\-h[0m] [[36m\-\-info | \-\-no\-info[0m] [[36m\-\-secure | \-\-no\-secure[0m] [32m[section][0m [32m[key][0m

dump configuration for the specified architecture

.TP
\fBsection\fR
filter settings by section

.TP
\fBkey\fR
filter settings by key

.SH OPTIONS \fI\,'ahriman service\-config'\/\fR
.TP
\fB\-\-info\fR, \fB\-\-no\-info\fR
show additional information, e.g. configuration files

.TP
\fB\-\-secure\fR, \fB\-\-no\-secure\fR
hide passwords and secrets from output

.SH COMMAND \fI\,'ahriman service\-config\-validate'\/\fR
[1;34musage: [0m[1;35mahriman service\-config\-validate[0m [[32m\-h[0m] [[32m\-e[0m]

validate configuration and print found errors

.SH OPTIONS \fI\,'ahriman service\-config\-validate'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if configuration is invalid

.SH COMMAND \fI\,'ahriman service\-key\-import'\/\fR
[1;34musage: [0m[1;35mahriman service\-key\-import[0m [[32m\-h[0m] [[36m\-\-key\-server [33mKEY_SERVER[0m] [32mkey[0m

import PGP key from public sources to the repository user

.TP
\fBkey\fR
PGP key to import from public server

.SH OPTIONS \fI\,'ahriman service\-key\-import'\/\fR
.TP
\fB\-\-key\-server\fR \fI\,KEY_SERVER\/\fR
key server for key import

.SH COMMAND \fI\,'ahriman service\-repositories'\/\fR
[1;34musage: [0m[1;35mahriman service\-repositories[0m [[32m\-h[0m] [[36m\-\-id\-only | \-\-no\-id\-only[0m]

list all available repositories

.SH OPTIONS \fI\,'ahriman service\-repositories'\/\fR
.TP
\fB\-\-id\-only\fR, \fB\-\-no\-id\-only\fR
show machine readable identifier instead

.SH COMMAND \fI\,'ahriman service\-run'\/\fR
[1;34musage: [0m[1;35mahriman service\-run[0m [[32m\-h[0m] [32mcommand [command ...][0m

run multiple commands on success run of the previous command

.TP
\fBcommand\fR
command to be run (quoted) without ``ahriman``

.SH COMMAND \fI\,'ahriman service\-setup'\/\fR
[1;34musage: [0m[1;35mahriman service\-setup[0m [[32m\-h[0m] [[36m\-\-build\-as\-user [33mBUILD_AS_USER[0m] [[36m\-\-from\-configuration [33mFROM_CONFIGURATION[0m]
                             [[36m\-\-generate\-salt | \-\-no\-generate\-salt[0m] [[36m\-\-makeflags\-jobs | \-\-no\-makeflags\-jobs[0m]
                             [[36m\-\-mirror [33mMIRROR[0m] [[36m\-\-multilib | \-\-no\-multilib[0m] [36m\-\-packager [33mPACKAGER[0m [[36m\-\-server [33mSERVER[0m]
                             [[36m\-\-sign\-key [33mSIGN_KEY[0m] [[36m\-\-sign\-target [33m{disabled,packages,repository}[0m] [[36m\-\-web\-port [33mWEB_PORT[0m]
                             [[36m\-\-web\-unix\-socket [33mWEB_UNIX_SOCKET[0m]

create initial service configuration, requires root

.SH OPTIONS \fI\,'ahriman service\-setup'\/\fR
.TP
\fB\-\-build\-as\-user\fR \fI\,BUILD_AS_USER\/\fR
force makepkg user to the specific one

.TP
\fB\-\-from\-configuration\fR \fI\,FROM_CONFIGURATION\/\fR
path to default devtools pacman configuration

.TP
\fB\-\-generate\-salt\fR, \fB\-\-no\-generate\-salt\fR
generate salt for user passwords

.TP
\fB\-\-makeflags\-jobs\fR, \fB\-\-no\-makeflags\-jobs\fR
append MAKEFLAGS variable with parallelism set to number of cores

.TP
\fB\-\-mirror\fR \fI\,MIRROR\/\fR
use the specified explicitly mirror instead of including mirrorlist

.TP
\fB\-\-multilib\fR, \fB\-\-no\-multilib\fR
add or do not multilib repository

.TP
\fB\-\-packager\fR \fI\,PACKAGER\/\fR
packager name and email

.TP
\fB\-\-server\fR \fI\,SERVER\/\fR
server to be used for devtools. If none set, local files will be used

.TP
\fB\-\-sign\-key\fR \fI\,SIGN_KEY\/\fR
sign key id

.TP
\fB\-\-sign\-target\fR \fI\,{disabled,packages,repository}\/\fR
sign options

.TP
\fB\-\-web\-port\fR \fI\,WEB_PORT\/\fR
port of the web service

.TP
\fB\-\-web\-unix\-socket\fR \fI\,WEB_UNIX_SOCKET\/\fR
path to unix socket used for interprocess communications

.SH COMMAND \fI\,'ahriman service\-shell'\/\fR
[1;34musage: [0m[1;35mahriman service\-shell[0m [[32m\-h[0m] [[32m\-o [33mOUTPUT[0m] [32m[code][0m

drop into python shell

.TP
\fBcode\fR
instead of dropping into shell, just execute the specified code

.SH OPTIONS \fI\,'ahriman service\-shell'\/\fR
.TP
\fB\-o\fR \fI\,OUTPUT\/\fR, \fB\-\-output\fR \fI\,OUTPUT\/\fR
output commands and result to the file

.SH COMMAND \fI\,'ahriman service\-tree\-migrate'\/\fR
[1;34musage: [0m[1;35mahriman service\-tree\-migrate[0m [[32m\-h[0m]

migrate repository tree between versions

.SH COMMAND \fI\,'ahriman user\-add'\/\fR
[1;34musage: [0m[1;35mahriman user\-add[0m [[32m\-h[0m] [[36m\-\-key [33mKEY[0m] [[36m\-\-packager [33mPACKAGER[0m] [[32m\-p [33mPASSWORD[0m] [[32m\-R [33m{unauthorized,read,reporter,full}[0m]
                        [32musername[0m

update user for web services with the given password and role. In case if password was not entered it will be asked interactively

.TP
\fBusername\fR
username for web service

.SH OPTIONS \fI\,'ahriman user\-add'\/\fR
.TP
\fB\-\-key\fR \fI\,KEY\/\fR
optional PGP key used by this user. The private key must be imported

.TP
\fB\-\-packager\fR \fI\,PACKAGER\/\fR
optional packager id used for build process in form of `Name Surname <mail@example.com>`

.TP
\fB\-p\fR \fI\,PASSWORD\/\fR, \fB\-\-password\fR \fI\,PASSWORD\/\fR
user password. Blank password will be treated as empty password, which is in particular must be used for OAuth2
authorization type.

.TP
\fB\-R\fR \fI\,{unauthorized,read,reporter,full}\/\fR, \fB\-\-role\fR \fI\,{unauthorized,read,reporter,full}\/\fR
user access level

.SH COMMAND \fI\,'ahriman user\-list'\/\fR
[1;34musage: [0m[1;35mahriman user\-list[0m [[32m\-h[0m] [[32m\-e[0m] [[32m\-R [33m{unauthorized,read,reporter,full}[0m] [32m[username][0m

list users from the user mapping and their roles

.TP
\fBusername\fR
filter users by username

.SH OPTIONS \fI\,'ahriman user\-list'\/\fR
.TP
\fB\-e\fR, \fB\-\-exit\-code\fR
return non\-zero exit status if result is empty

.TP
\fB\-R\fR \fI\,{unauthorized,read,reporter,full}\/\fR, \fB\-\-role\fR \fI\,{unauthorized,read,reporter,full}\/\fR
filter users by role

.SH COMMAND \fI\,'ahriman user\-remove'\/\fR
[1;34musage: [0m[1;35mahriman user\-remove[0m [[32m\-h[0m] [32musername[0m

remove user from the user mapping and update the configuration

.TP
\fBusername\fR
username for web service

.SH COMMAND \fI\,'ahriman web'\/\fR
[1;34musage: [0m[1;35mahriman web[0m [[32m\-h[0m]

start web server

.SH COMMAND \fI\,'ahriman web\-reload'\/\fR
[1;34musage: [0m[1;35mahriman web\-reload[0m [[32m\-h[0m]

reload web server configuration

.SH COMMENTS
Quick setup command (replace repository name, architecture and packager as needed):

>>> ahriman \-a x86_64 \-r aur service\-setup \-\-packager "ahriman bot <ahriman@example.com>"

Add new package from AUR:

>>> ahriman package\-add ahriman \-\-now

Check for updates and build out\-of\-dated packages (add ``\-\-dry\-run`` to build it later):

>>> ahriman repo\-update

Remove package from the repository:

>>> ahriman package\-remove ahriman

Start web service (requires additional configuration):

>>> ahriman web

.SH AUTHOR
.nf
ahriman team
.fi
.nf

.fi

.SH DISTRIBUTION
The latest version of ahriman may be downloaded from
.UR https://github.com/arcan1s/ahriman
.UE
